<!DOCTYPE html>
<html>
<head>
    <title>{{ screen.title }} - Alejandro</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/core.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/terminal.css') }}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/xterm@5.3.0/css/xterm.min.css">
    <script src="https://cdn.jsdelivr.net/npm/xterm@5.3.0/lib/xterm.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/xterm-addon-fit@0.8.0/lib/xterm-addon-fit.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/xterm-addon-web-links@0.9.0/lib/xterm-addon-web-links.min.js"></script>
</head>
<body>
    <div class="app-container">
        <div class="content-area">
            <h1>{{ screen.title }}</h1>
            
            <div class="terminal-view" id="terminal-container">
                <!-- xterm.js will render here -->
            </div>
            
            <div style="margin-top: 10px; color: #666; font-size: 12px;">
                Press keys to interact with the terminal. Click inside the terminal to focus.
            </div>
            
            <div class="terminal-tabs">
                {% for name in terminal_names %}
                <div class="terminal-tab {% if loop.index0 == current_index %}active{% endif %}" 
                     onclick="switchTerminal('{{ name }}')">
                    {{ name }}
                </div>
                {% endfor %}
            </div>
        </div>
        
        <div class="footer">
            {% include 'menu.html' %}
        </div>
    </div>

    <script>
        window.initialSessionId = "{{ session_id }}";
        window.sessionId = "{{ session_id }}";
        window.terminalId = "{{ terminal_id }}";
        console.log("Terminal page initialized with terminal ID:", "{{ terminal_id }}");
        
        // Default to "main" if no terminal ID is provided
        if (!window.terminalId || window.terminalId === "none") {
            window.terminalId = "main";
            console.log("Using default terminal ID:", window.terminalId);
        }
    </script>
    <script src="{{ url_for('static', filename='js/core.js') }}"></script>
    <script src="{{ url_for('static', filename='js/terminal.js') }}"></script>
</body>
</html>
