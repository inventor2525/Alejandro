{% extends "base.html" %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/terminal.css') }}">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/xterm@5.3.0/css/xterm.css">
{% endblock %}

{% block content %}
<div class="terminal-view" id="terminal-container">
    <!-- xterm.js will render here -->
</div>

<div style="margin-top: 10px; color: #666; font-size: 12px;">
    Press keys to interact with the terminal. Click inside the terminal to focus.
</div>
{% endblock %}

{% block scripts %}
<script>
    window.sessionId = "{{ session_id }}";
    window.terminalId = "{{ terminal_id }}";
    console.log("Terminal page initialized with terminal ID:", "{{ terminal_id }}");
    
    // Default to "main" if no terminal ID is provided
    if (!window.terminalId || window.terminalId === "none") {
        window.terminalId = "main";
        console.log("Using default terminal ID:", window.terminalId);
    }
</script>
<script src="https://cdn.jsdelivr.net/npm/xterm@5.3.0/lib/xterm.js"></script>
<script src="https://cdn.jsdelivr.net/npm/xterm-addon-fit@0.7.0/lib/xterm-addon-fit.js"></script>
<script src="https://cdn.jsdelivr.net/npm/xterm-addon-web-links@0.8.0/lib/xterm-addon-web-links.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@xterm/addon-serialize@0.12.0/lib/addon-serialize.js"></script>
<script src="{{ url_for('static', filename='js/terminal.js') }}"></script>
{% endblock %}
